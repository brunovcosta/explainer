<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Explainer</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/codemirror.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/codemirror.min.js"></script>
		<link rel="stylesheet" href="https://necolas.github.io/normalize.css/4.0.0/normalize.css">
		<link rel="stylesheet" href="http://codemirror.net/lib/codemirror.css">
		<link rel="stylesheet" href="http://codemirror.net/addon/fold/foldgutter.css">
		<link rel="stylesheet" href="http://codemirror.net/addon/hint/show-hint.css">
		<link rel="stylesheet" href="http://codemirror.net/addon/lint/lint.css">
		<script src="http://coffeescript.org/extras/coffee-script.js"></script>
		<script src="http://coffeelint.org/js/coffeelint.js"></script>
		<script src="http://codemirror.net/mode/coffeescript/coffeescript.js"></script>
		<script src="http://codemirror.net/addon/lint/coffeescript-lint.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/keymap/sublime.min.js"></script>
		<script src="https://coffeescript.org/v2/browser-compiler/coffeescript.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/theme/solarized.css">
		<script src="g9.js"></script>
		<style>
*{
	margin:0;
	padding:0;
}
#code{
	position:absolute;
	top:0;
	bottom:0;
}

#blackboard{
	width: 100vw;
	height: 100vh;
}
svg *{
	cursor: move
}
		</style>
	</head>
	<body>
		<div id="blackboard"></div>
		<textarea id="code">g9({
	radius: 100
	angle: 0
},(data, ctx)-&gt;
	sides = 10
	for i in [0 .. sides]
		a = data.angle + i/sides * Math.PI * 2
		r1 = data.radius
		r2 = r1/2
		ctx.point(r1 * Math.cos( a), r1 * Math.sin( a))
		ctx.point(r2 * Math.cos(-a), r2 * Math.sin(-a), {fill: 'red'})
)</textarea>
		<script>
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
	mode: "text/x-coffeescript",
	tabMode: "indent",
	styleActiveLine: true,
	lineNumbers: true,
	lineWrapping: true,
	autoCloseTags: true,
	foldGutter: true,
	dragDrop: true,
	lint: true,
	gutters: ["CodeMirror-lint-markers", "CodeMirror-linenumbers", "CodeMirror-foldgutter"]
});
editor.setOption('extraKeys', {
	"Cmd-Enter": run,
	"Ctrl-Enter": run
})

function run(){
	document.getElementById("blackboard").innerHTML = ""

	CoffeeScript.eval(editor.getValue()).insertInto('#blackboard');
	document.body.parentElement.scrollTop=0;
}
run();


		</script>
	</body>
</html>
